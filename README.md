### Shorty

Сервис для сокращения URL. Позволяет создать короткую ссылку при переходе по которой будет произведен редирект на исходную ссылку. Так же сервис позволяет создовать свои кастомные короткие ссылки. И перед сохранением проверяет корректность исходной ссылки.

В проекте используются: `PHP` `Laravel` `MySQL` `Docker`

---
#### Установка

Перед установкой убедитесь что у вас установлены: 
 - PHP 7.4 или 8.0
 - Docker и Docker-compose (для Windows 10 и Mac OS Docker Desktop)
 - Composer 2

Команды для установки:
1. `git clone git@github.com:mir-evgenii/shorty.git`
2. `cd shorty`
3. `composer install`
4. `./vendor/bin/sail up`

При первом запуске команды `./vendor/bin/sail up` будут созданы Docker контейнеры для запуска приложения.
После запуска контейнеров необходимо войти в контейнер `shorty-laravel.test-1` (у вас этот контейнер может иметь немного другое название).

Выполняем команду `docker ps` ищем нужный контейнер и его CONTAINER ID (вот такого формата `77431c912e20`).
Далее входим в нужный контейнер подставив свой CONTAINER ID `docker exec -ti {CONTAINER ID} bash`.

В контейнере необходимо выполнить команду `php artisan migrate`. Эта команда запустит миграции, создаст необходимые для приложения таблицы в БД.
Так же можно запустить тесты командой `php artisan test`.

После этого можно выйти из контейнера нажав комбинацию клавиш `ctrl`+`p`+`q`.

---
#### API

---
##### Создание короткой ссылки.

Запрос из консоли `curl -d "URL=https://www.google.com" -X POST http://localhost/add`

Ответ: `{"URL":"http:\/\/localhost\/VEIrKV"}` (символ `/` экранирован).

В случае ошибки ответ будет так же содержать параметр URL и в нем строку с ошибкой, или массив с ошибками.

Пример ответа с ошибкой: `{"URL":"Not correct URL!"}`

---
##### Создание кастомной короткой ссылки. 
Свою кастомную ссылку нужно написать прямо в строке запроса, если такая ссылка свободна она будет заведена.

Запрос из консоли `curl -d "URL=https://www.google.com" -X POST http://localhost/custom`

Ответ: `{"URL":"http:\/\/localhost\/custom"}` (символ `/` экранирован).

---
##### Переход по ссылке 
Ранее полученную ссылку нужно очистить от экранирования (предпологается что делать это будет какое то приложение) и вставить ссылку в поисковую строку в браузере.


